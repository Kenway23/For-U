<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Selamat Ulang Tahun ke-20 ‚ù§Ô∏è</title>

    <style>
        /* ======= BASIC + FULLSCREEN ======= */
        :root {
            --bg1: #EAF6FF;
            --bg2: #F4FBFF;
            --card: #ffffff;
            --accent: #7FB6FF;
            /* biru lembut */
            --accent-2: #A9D6FF;
            --muted: #6b6b6b;
        }

        html,
        /* ======= BACKGROUND PLUSH DOLL / PASTEL SOFT ======= */

        body {
            background:
                radial-gradient(circle at 20% 30%, #ffffff 0%, #EAF6FF 45%, #F4FBFF 90%),
                url('https://i.imgur.com/6b7ZQhE.png');
            /* tekstur plush lembut */
            background-size: cover;
            background-attachment: fixed;
        }

        /* blob glow */
        .bg-blob {
            position: fixed;
            width: 420px;
            height: 420px;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.55;
            z-index: -1;
        }

        .blob1 {
            background: #A9D6FF;
            top: -80px;
            left: -60px;
        }

        .blob2 {
            background: #FFECF6;
            bottom: -100px;
            right: -80px;
        }

        .blob3 {
            background: #D4E9FF;
            top: 55%;
            left: 20%;
            transform: translateY(-50%);
            width: 360px;
            height: 360px;
        }


        /* ======= LAYOUT (Instagram-like responsive card) ======= */
        .wrap {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .card {
            width: 100%;
            max-width: 820px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.82), rgba(255, 255, 255, 0.9));
            border-radius: 18px;
            box-shadow: 0 18px 40px rgba(60, 60, 90, 0.08);
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 20px;
            padding: 22px;
            position: relative;
            overflow: visible;
        }

        /* Mobile: single column */
        @media (max-width:900px) {
            .card {
                grid-template-columns: 1fr;
                padding: 16px;
                border-radius: 12px;
                max-width: 420px;
            }
        }

        /* ======= LEFT: PHOTO / SLIDESHOW (mirip Instagram post) ======= */
        .left {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .post {
            width: 100%;
            max-width: 520px;
            border-radius: 14px;
            overflow: hidden;
            background: linear-gradient(0deg, var(--card), #fff);
            border: 6px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 10px 30px rgba(100, 120, 150, 0.06);
            position: relative;
            aspect-ratio: 4 / 5;
            /* Instagram-like portrait */
        }

        .slides {
            height: 100%;
            width: 100%;
            position: relative;
        }

        .slides img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transform: scale(1.03);
            transition: opacity .8s ease, transform .9s ease;
        }

        .slides img.active {
            opacity: 1;
            transform: scale(1);
        }

        /* slideshow controls */
        .dots {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 12px;
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(0, 0, 0, 0.06);
            cursor: pointer;
        }

        .dot.active {
            background: var(--accent);
            box-shadow: 0 4px 10px rgba(127, 182, 255, 0.3);
        }

        /* tiny nav arrows */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.6);
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            backdrop-filter: blur(3px);
        }

        .nav-btn.left {
            left: 8px;
        }

        .nav-btn.right {
            right: 8px;
        }

        /* ======= RIGHT: TEXT, TYPEWRITER, ACTIONS ======= */
        .right {
            padding: 12px 6px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 12px;
        }

        h1 {
            margin: 0;
            font-size: 22px;
            color: var(--accent-2);
            letter-spacing: -0.2px;
        }

        p.lead {
            margin: 6px 0 0 0;
            color: #344053;
            line-height: 1.45;
        }

        /* typewriter box */
        .letterBox {
            margin-top: 8px;
            padding: 14px;
            background: linear-gradient(0deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.85));
            border-radius: 12px;
            min-height: 120px;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
            position: relative;
            overflow: auto;
        }

        #typing {
            white-space: pre-wrap;
            font-size: 15px;
            color: #2f2f2f;
        }

        /* action buttons */
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .btn {
            border: none;
            cursor: pointer;
            padding: 10px 12px;
            border-radius: 10px;
            box-shadow: 0 8px 18px rgba(60, 80, 120, 0.06);
            background: white;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #244;
        }

        .btn.primary {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: white;
            box-shadow: 0 10px 30px rgba(127, 182, 255, 0.2);
        }

        /* hidden small controls */
        .music-controls {
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 13px;
            color: var(--muted);
        }

        /* ======= BALLOONS, SPARKLES, HEARTS (overlay) ======= */
        .overlay {
            position: absolute;
            inset: 0;
            pointer-events: none;
            overflow: visible;
        }

        /* balloon styles */
        .balloon {
            position: absolute;
            bottom: -120px;
            width: 64px;
            height: 88px;
            border-radius: 50% 50% 46% 46%;
            background: linear-gradient(180deg, #e6f7ff, var(--accent-2));
            left: 20%;
            transform-origin: center bottom;
            animation: rise 8s linear infinite;
            box-shadow: 0 10px 25px rgba(100, 150, 200, 0.12);
        }

        .balloon::after {
            content: "";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: -28px;
            width: 2px;
            height: 28px;
            background: rgba(0, 0, 0, 0.06);
        }

        @keyframes rise {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0;
            }

            5% {
                opacity: 1;
            }

            100% {
                transform: translateY(-130vh) scale(1.06);
                opacity: 0.8;
            }
        }

        /* sparkle */
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            transform: rotate(25deg);
            opacity: 0;
            background: linear-gradient(90deg, #fff, #ffe9ff);
            filter: blur(.3px);
            border-radius: 2px;
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.6);
            animation: sparkleAnim 2.2s linear infinite;
        }

        @keyframes sparkleAnim {
            0% {
                transform: translateY(0) scale(.6) rotate(25deg);
                opacity: 0;
            }

            30% {
                opacity: 1;
                scale: 1.1;
            }

            100% {
                transform: translateY(-40px) scale(.3) rotate(25deg);
                opacity: 0;
            }
        }

        /* hearts particle */
        .heart {
            position: absolute;
            width: 28px;
            height: 28px;
            background: transparent;
            pointer-events: none;
            transform-origin: center;
            animation: heartRise 1.2s ease-out forwards;
            z-index: 9999;
        }

        .heart:before,
        .heart:after {
            content: "";
            position: absolute;
            width: 14px;
            height: 22px;
            background: var(--accent);
            border-radius: 14px 14px 0 0;
            top: 0;
            left: 7px;
        }

        .heart:after {
            transform: rotate(-45deg);
            left: 0;
        }

        .heart:before {
            transform: rotate(45deg);
            left: 14px;
        }

        @keyframes heartRise {
            0% {
                transform: translateY(0) scale(.6) rotate(0);
                opacity: 1;
            }

            70% {
                transform: translateY(-120px) scale(1.1) rotate(10deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-200px) scale(.4) rotate(25deg);
                opacity: 0;
            }
        }

        /* small helper */
        .small {
            font-size: 13px;
            color: var(--muted);
        }

        /* modal surat */
        .modal {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(12, 20, 40, 0.45);
            z-index: 99999;
            opacity: 0;
            pointer-events: none;
            transition: opacity .25s ease;
        }

        .modal.show {
            opacity: 1;
            pointer-events: auto;
        }

        .modal .cardModal {
            width: 90%;
            max-width: 680px;
            max-height: 86vh;
            overflow: auto;
            background: linear-gradient(180deg, #fff, #fefefe);
            border-radius: 12px;
            padding: 22px;
            box-shadow: 0 20px 50px rgba(20, 30, 60, 0.25);
        }

        .closeBtn {
            float: right;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #444;
        }

        /* responsive tweaks */
        @media (max-width:500px) {
            h1 {
                font-size: 20px;
            }

            .post {
                aspect-ratio: 3 / 4;
            }

            .card {
                padding: 12px;
                gap: 12px;
            }
        }
    </style>
</head>

<body>
    <div class="bg-blob blob1"></div>
    <div class="bg-blob blob2"></div>
    <div class="bg-blob blob3"></div>

    <div class="wrap">
        <div class="card" id="mainCard">

            <!-- LEFT: slideshow post -->
            <div class="left">
                <div class="post" aria-label="Slideshow foto">
                    <div class="slides" id="slides">
                        <img src="foto1.jpg" alt="Foto kita 1" class="active">
                        <img src="foto2.jpg" alt="Foto kita 2">
                        <img src="foto3.jpg" alt="Foto kita 3">
                    </div>

                    <!-- dots -->
                    <div class="dots" id="dots"></div>

                    <!-- nav arrows -->
                    <button class="nav-btn left" id="prevBtn" title="Sebelumnya">&#9664;</button>
                    <button class="nav-btn right" id="nextBtn" title="Selanjutnya">&#9654;</button>
                </div>
            </div>

            <!-- RIGHT: message, typewriter, actions -->
            <div class="right">
                <h1>Selamat Ulang Tahun ke-20, Sayangku üíô</h1>
                <div class="small">INI HADIAH KECIL DARI AKU MESKIPUN UDAH KETEBAK AHAHAHA</div>

                <div class="letterBox">
                    <div id="typing"></div>
                </div>

                <div class="actions">
                    <button class="btn primary" id="loveBtn" title="Kirim cinta">üíô Love!</button>
                    <button class="btn" id="balloonBtn" title="Balon">üéà Balon</button>
                    <button class="btn" id="sparkleBtn" title="Sparkle">‚ú® Sparkle</button>
                    <button class="btn" id="openLetterBtn" title="Buka surat">üíå Buka Surat</button>

                    <div style="flex:1"></div>

                    <div class="music-controls">
                        <button class="btn" id="muteBtn" title="Toggle mute">üîä</button>
                        <div class="small">Klik Layar Kalau Gaada Lagunya</div>
                    </div>
                </div>



            </div>

            <!-- overlay for balloons, sparkles, hearts -->
            <div class="overlay" id="overlay"></div>

        </div>
    </div>

    <!-- MODAL SURAT -->
    <div class="modal" id="modal">
        <div class="cardModal">
            <button class="closeBtn" id="closeModal">‚úñ</button>
            <h2 style="color:var(--accent); margin-top:6px">Untuk Ebbyyü§ç</h2>
            <p style="line-height:1.6; color:#333; font-size:16px;">
                aloo eebbyyü§çü§ç,<br><br>

                Hari ini kamu uda 20 tahun yaa uda jadi dewasa AHAHAHA,ini sedikit kata kata dari aku
                Aku mau bilang terima kasih karena udaa milih akuu untuk jadi pasangan kamuu dan nemenin kamu sampai
                umur 20 tahun ini,
                Melakukan banyak hal sama akuu main ke sana kesini , dan selalu ada di sisi akuu.
                <br><br>
                Di umur kamu yang sekarang ini, aku harap kamu selalu jadi ebbyy yang aku kenall,
                yang selalu senyumm ,ketawa ketawa , dan sedikit nyebelin AHAHAHA,
                oiyaa jangann nanggiss nanggiss lagi yaa di 20 tahun ini aku gamau liat kamu sedihh,
                Kamu tauu gaa kamu itu kuat, kamu hebatt, kamu selalu bisaa ngehadapin hari hari kamuu dengan full
                senyumm,
                Kamu haruss bahagiaa di hari special inii.

                <br><br>
                I LOVE U IN EVERY UNIVERSEü§çü§ç,YOU ARE MY EVERYTHING,IM LUCKY TO HAVE YOU,DONT GO YAA EBBYYü§ç
                I HOPE YOU ARE ALWAYSS HAPPYü§ç,I'M LUCKY TO HAVE YOU IN MY LIFE,I NEVER REGRET HAVING YOU IN MY LIFE
                YOU ARE ALWAYS MY BEST SUPPORT SYSTEM.
                <br><br>
                I love you eebbyy I hope we can be together forever ü§çü§ç<br>
                (Kibab)
            </p>
        </div>
    </div>

    <!-- AUDIO (autoplay) -->
    <audio id="bgm" loop preload="auto">
        <source src="audio/romantic.mp3" type="audio/mp3">
        Your browser does not support audio.
    </audio>

    <script>
        /* ==========================
           SLIDESHOW (3 foto)
           ========================== */
        const slides = document.querySelectorAll('#slides img');
        const dotsWrap = document.getElementById('dots');
        let current = 0;
        let slideInterval = null;
        const SLIDE_DELAY = 4500; // ms

        // create dots
        slides.forEach((s, i) => {
            const d = document.createElement('div');
            d.className = 'dot' + (i === 0 ? ' active' : '');
            d.addEventListener('click', () => { goTo(i); resetInterval(); });
            dotsWrap.appendChild(d);
        });

        function updateSlides() {
            slides.forEach((s, i) => s.classList.toggle('active', i === current));
            document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === current));
        }
        function next() { current = (current + 1) % slides.length; updateSlides(); }
        function prev() { current = (current - 1 + slides.length) % slides.length; updateSlides(); }
        function goTo(i) { current = i; updateSlides(); }

        document.getElementById('nextBtn').addEventListener('click', () => { next(); resetInterval(); });
        document.getElementById('prevBtn').addEventListener('click', () => { prev(); resetInterval(); });

        function startInterval() {
            slideInterval = setInterval(next, SLIDE_DELAY);
        }
        function resetInterval() {
            clearInterval(slideInterval);
            startInterval();
        }
        startInterval();

        /* ==========================
           TYPEWRITER (tetap level B - sedang)
           ========================== */
        const typingEl = document.getElementById('typing');
        const fullText = `Selamat ulang tahun, Cantikkk. üéÇ

Dua Puluh tahun bukan waktu yang singkatt aku harap kamu selalu mendapat hal baik di 20 tahun ini,
semua hal yang kamu lewati sebelum 20 tahun semoga menjadi hal yang membuat mu tumbuh menjadi wanita yang kuat 

Aku akan terus ada di sisi kamu,Berusaha untuk jadi garda terdepan dikala kamu sedih dan berusaha selalu menjadi orang yang merayakan hal sekecil apapun  
Terima kasih telah menjadi kamu,yang membuat hari-hariku lebih berwarna.

Aku harap semua harapan kamu tercapai yaa di umur ini,tetap jadi ebyy yang aku kenal yaaü§ç`;

        // typewriter speed
        let idx = 0;
        function typeStep() {
            if (idx < fullText.length) {
                typingEl.textContent += fullText.charAt(idx);
                idx++;
                const delay = (fullText.charAt(idx - 1) === '\n') ? 150 : 28;
                setTimeout(typeStep, delay);
            }
        }
        setTimeout(typeStep, 600);

        /* ==========================
           OVERLAY: BALLOONS, SPARKLES, HEARTS
           ========================== */
        const overlay = document.getElementById('overlay');

        function spawnBalloon(xPercent) {
            const b = document.createElement('div');
            b.className = 'balloon';
            // randomize horizontal position a bit if not provided
            const left = (typeof xPercent === 'number') ? xPercent : (Math.random() * 80 + 4);
            b.style.left = left + '%';
            b.style.background = `linear-gradient(180deg, ${randomPalette()}, ${randomPaletteLight()})`;
            b.style.animationDuration = (6 + Math.random() * 4) + 's';
            overlay.appendChild(b);
            // remove after animation
            setTimeout(() => { b.remove(); }, 11000);
        }
        function randomPalette() {
            const a = ['#DFF6FF', '#CFEFFF', '#E6F8FF', '#BEEBFF'];
            return a[Math.floor(Math.random() * a.length)];
        }
        function randomPaletteLight() {
            const b = ['#9FD6FF', '#A9D6FF', '#BEEBFF', '#B2E0FF'];
            return b[Math.floor(Math.random() * b.length)];
        }

        function spawnSparkles(count = 8) {
            for (let i = 0; i < count; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle';
                s.style.left = (10 + Math.random() * 80) + '%';
                s.style.top = (20 + Math.random() * 60) + '%';
                s.style.animationDuration = (1.2 + Math.random() * 1.6) + 's';
                overlay.appendChild(s);
                setTimeout(() => s.remove(), 3000 + Math.random() * 1200);
            }
        }

        function spawnHearts(count = 10, originX = null, originY = null) {
            for (let i = 0; i < count; i++) {
                const h = document.createElement('div');
                h.className = 'heart';
                const x = originX !== null ? originX + (Math.random() * 60 - 30) : (window.innerWidth * 0.5 + (Math.random() * 220 - 110));
                const y = originY !== null ? originY + (Math.random() * 60 - 30) : (window.innerHeight * 0.5 + (Math.random() * 100 - 50));
                h.style.left = x + 'px';
                h.style.top = y + 'px';
                // slightly blue-ish hearts
                const hue = 200 + Math.floor(Math.random() * 30);
                h.style.setProperty('--accent', `hsl(${hue}deg 80% 70%)`);
                overlay.appendChild(h);
                setTimeout(() => h.remove(), 1400 + Math.random() * 600);
            }
        }

        /* button handlers */
        document.getElementById('balloonBtn').addEventListener('click', () => {
            // spawn multiple balloons
            for (let i = 0; i < 6; i++) {
                setTimeout(() => spawnBalloon(8 + Math.random() * 84), i * 200);
            }
        });
        document.getElementById('sparkleBtn').addEventListener('click', () => spawnSparkles(18));
        document.getElementById('loveBtn').addEventListener('click', (e) => {
            // spawn hearts from button position
            const rect = e.currentTarget.getBoundingClientRect();
            spawnHearts(16, rect.left + rect.width / 2, rect.top + rect.height / 2);
        });

        /* auto ambient balloons slowly every 9s */
        setInterval(() => {
            if (Math.random() > 0.6) {
                spawnBalloon(5 + Math.random() * 90);
            }
        }, 9000);

        /* occasional sparkles */
        setInterval(() => {
            if (Math.random() > 0.65) spawnSparkles(6);
        }, 4200);

        /* ==========================
           MODAL SURAT (open / close)
           ========================== */
        const modal = document.getElementById('modal');
        document.getElementById('openLetterBtn').addEventListener('click', () => {
            modal.classList.add('show');
        });
        document.getElementById('closeModal').addEventListener('click', () => {
            modal.classList.remove('show');
        });
        modal.addEventListener('click', (ev) => {
            if (ev.target === modal) modal.classList.remove('show');
        });

        /* ==========================
           AUDIO: autoplay + fade in/out + mute toggle
           ========================== */
        const audio = document.getElementById('bgm');
        audio.volume = 0; // start at 0 for fade in
        let audioFading = false;

        // attempt autoplay
        function tryPlayAudio() {
            audio.play().then(() => {
                fadeVolume(0, 0.7, 2200); // fade to 0.7
            }).catch(() => {
                // user gesture required ‚Äî show small hint (we already have tip text)
            });
        }
        tryPlayAudio();

        // fade helper
        function fadeVolume(from, to, duration) {
            if (audioFading) return;
            audioFading = true;
            const start = performance.now();
            function raf(now) {
                const t = Math.min(1, (now - start) / duration);
                audio.volume = from + (to - from) * t;
                if (t < 1) requestAnimationFrame(raf);
                else audioFading = false;
            }
            requestAnimationFrame(raf);
        }

        // mute toggle
        let muted = false;
        document.getElementById('muteBtn').addEventListener('click', () => {
            if (!muted) {
                fadeVolume(audio.volume, 0, 600);
                muted = true;
                document.getElementById('muteBtn').textContent = 'üîà';
            } else {
                fadeVolume(audio.volume, 0.7, 1000);
                muted = false;
                document.getElementById('muteBtn').textContent = 'üîä';
            }
        });

        // if user interacts anywhere, ensure audio plays (fallback)
        document.addEventListener('click', function oncePlay() {
            if (audio.paused) {
                audio.play().then(() => fadeVolume(0, 0.7, 1200)).catch(() => { });
            } else {
                // ensure volume not 0
                if (!muted && audio.volume < 0.02) fadeVolume(0, 0.7, 1000);
            }
        }, { once: true, passive: true });

        /* fade out music when page hidden */
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                fadeVolume(audio.volume, 0, 400);
            } else {
                if (!muted) fadeVolume(audio.volume, 0.7, 800);
            }
        });

        /* cleanup on unload */
        window.addEventListener('beforeunload', () => {
            try { audio.pause(); } catch (e) { }
        });

        /* OPTIONAL: keyboard shortcuts for convenience */
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') { next(); resetInterval(); }
            if (e.key === 'ArrowLeft') { prev(); resetInterval(); }
            if (e.key === 'b') spawnBalloon(20 + Math.random() * 60);
            if (e.key === 'l') spawnHearts(12);
        });

        /* ======== small accessibility: focus style when tabbing ======== */
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') document.body.classList.add('keyboard-nav');
        });

        /* End of script */
    </script>

</body>

</html>